/*
 * test_log.c
 *
 *  Created on: 2012-6-1
 *      Author: Administrator
 */
#include <stdio.h>
#include <clib/log.h>
#include <stdio.h>
#include <errno.h>
#include <string.h>

static void test_default_log()
{
    LOG(LOG_LEVEL_TEST, "测试默认log成功");
}

static void test_log_errno()
{
    FILE *fp = NULL;
    if ((fp = fopen("/aaa/bbb", "r")) == NULL) {
        printf("%s\n", strerror(errno));
        LOG_ERRNO(LOG_LEVEL_TEST, "打开文件失败");
    }
}

static void test_rolling_file_log()
{
    log_t *log = log_new_rolling_file(LOG_LEVEL_TEST, "/home/log_test/log", 7,
            1);

    log_str(log, __FILE__, __LINE__, LOG_LEVEL_TEST, "111111111111111");
    log_free(log);
}

static void test_rolling_file_log2()
{
    if (g_default_log != NULL) {
        log_free(g_default_log);
    }
    g_default_log = log_new_rolling_file(LOG_LEVEL_TEST, "/home/log_test/log",
            7, 1);
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "33333333333333333333333");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "33333333333333333333333");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "33333333333333333333333");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "33333333333333333333333");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "33333333333333333333333");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "33333333333333333333333");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "33333333333333333333333");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "33333333333333333333333");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");
    LOG(LOG_LEVEL_TEST, "222222222222222222222222222222222222222");

    log_free(g_default_log);
    g_default_log = NULL;
    return;
}

void test_log()
{
    //test_default_log();
    //test_rolling_file_log();
//    test_rolling_file_log2();
    test_log_errno();
}

